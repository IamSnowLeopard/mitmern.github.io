<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Route</title>

    <!--Add Google Maps library and Styles-->
    <script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQrK_5xjlOp_mLurNCGgtfXyv0PSVCp2Q&callback=initMap">
    </script>

    <style>
        #map {
            height: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

</head>
<body>
  <div id="map"></div>
  <div class="map-overlay top">
    <button style="font-size: 2em;" onclick="move()">
        Show stops between MIT and Harvard
     </button>
</div>

<!--Create a bus route on a map-->
<script>

    let map;

    async function initMap() {
        const { Map } = await google.maps.importLibrary("maps");

        map = new Map(document.getElementById("map"), {
            center: { lat: -34.397, lng: 150.644 },
            zoom: 8,
    });
}

initMap();

    //add a marker
    let marker = new map.Marker()
        .setLngLat([-71.09152, 42.358862])
        .addTo(map);

    //get a hold of the busstops in a programmatic way
   async function getBusLocations(){
    let url = 'https://api-v3.mbta.com/vehicles?filter[route]=1&include=trip';
    let response = await fetch(url);
    let json = await response.json();
    return json.data;
   }


    //move the bus
    let counter = 0;
    function move(){
        setTimeout(() => {
            if (counter >= busStops.length) return;
            marker.setLngLat(busStops[counter]);
            counter++;
            move();
        }, 1000)
    }
</script>

</body>
</html>